<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta content="initial-scale=1.0,user-scalable=no,maximum-scale=1,width=device-width" name="viewport" />
<meta content="yes" name="apple-mobile-web-app-capable" />
<meta content="black" name="apple-mobile-web-app-status-bar-style" />
<meta content="telephone=no" name="format-detection" />
<title>支付</title>
<link rel="stylesheet" type="text/css" href="../css/basic.css" />
<link rel="stylesheet" type="text/css" href="css/style.css" />
</head>
<body>
<section class="my_view" id="appVUE">
	<div class="cnTop">
		<a class="goback fl" href="javascript:history.go(-1);"></a>
	</div>
	
	<div class="plcn-c">
		<p class="bit">健康报告解读</p>
		<p class="tit">3000000+人用过，99%的用户满意度</p>
		<ul class="">
			<li><em><img src="img/i-01.png"></em><font>指标解读</font></li>
			<li><em><img src="img/i-03.png"></em><font>改善建议</font></li>
			<li><em><img src="img/i-02.png"></em><font>趋势管理</font></li>
		</ul>
	</div>
	
	<p class="g1"></p>
	<div class="pcinf">
		<p class="fc">
			<i></i><span>为您提供全部指标的解读与健康趋势管理。</span>
		</p>
		<p class="fc">
			<i></i><span>为您量身定制专属的健康解决方案：<font>食谱、营养、运动及生活方式建议</font>。</span>
		</p>
	</div>
	
	<p class="g1"></p>
	<div class="pczj">
		<p class="bit">健康专家团队</P>
		<ul class="zjjs_b">
			<li class="zjjs">
				<div class="j-l"><img src="img/doc.png"></div>
				<div class="j-r">
					<p>高岭娣 副教授</p>
					<p>首都医科大学卫生与教育管理学院体育学系主任</p>
				</div>
			</li>
			<li class="zjjs">
				<div class="j-l"><img src="img/doc.png"></div>
				<div class="j-r">
					<p>潘晓明   中医博士</p>
					<p>北京大学医学部研究中心学术部副主任</p>
				</div>
			</li>
			<li class="zjjs">
				<div class="j-l"><img src="img/doc.png"></div>
				<div class="j-r">
					<p>肖 荣   博士/教授  博士生导师</p>
					<p>首都医科大学公共卫生学院营养与食品卫生学系主任</p>
				</div>
			</li>
			<li class="zjjs">
				<div class="j-l"><img src="img/doc.png"></div>
				<div class="j-r">
					<p>佟彤      中医养生专家</p>
					<p>北京电视台《养生堂》、山东卫视《养生》、江苏卫视《万家灯火》、MSN《名医讲堂》等特约专家</p>
				</div>
			</li>
			<li class="zjjs">
				<div class="j-l"><img src="img/doc.png"></div>
				<div class="j-r">
					<p>顾晓玲 中国首批注册营养师</p>
					<p>兰州大学营养学硕士 、临床营养师</p>
				</div>
			</li>
		</ul>	
	</div>

	<div class="fix-p">
		<p class="ctxt">￥{{price}}</p>
		<button class="go" id="pay">支付</button>
	</div>
	
	<div class="sl-pay">
		<p class="bt"><span>选择支付方式</span><i class="close"><img src="img/o-close.png"></i></p>
		<div class="cnn">
			<p class="p1">支付金额</p>
			<p class="p2">￥{{price}}</p>
		</div>
		<a class="pay-li" v-for="pay in data" :href="'../wxPay_new.html?reportId='+reportId+'&userId='+userId+
			'&packageId='+packageId+'&name='+name+'&price='+price+'&openId='+openId+
			'&edition='+edition+'&payChannelId='+pay.payChannelId+'&orderNum='+orderNum+'&payChannelType='+pay.payChannelType">
			<i :class="'ico'+pay.payChannelType"></i><span>{{pay.payChannelName}}</span><img class="arr" src="img/o-arr.png">
		</a>
	</div>	
	
</section>

<div class="v_overlay"></div>
<div class="load-overlay">
	<div class="loadimg"><img src="img/loading.gif"></div>
</div>

<div class="daifu_d">
	<p class="imo"><img src="img/daifu.png" class="img_b"></p>
	<p class="tit">亲，这份报告数据已被别人扫描<br>请重新测量</p>
	<p class="tip">误扫别人的健康报告，将会影响您的健康趋势，谢谢您的配合！</p>
	<p class="dbtn"><button id="iknow">知道了</button></p>
</div>

<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript" src="../js/base.js"></script>
<script type="text/javascript" src="js/vue.min.js"></script>
<script type="text/javascript" src="../js/payChannel.js"></script>
<script type="text/javascript">
(function (doc, win) {
    var docEl = doc.documentElement,
        resizeEvt = 'orientationchange' in window ? 'orientationchange' : 'resize',
        recalc = function () {
            var clientWidth = docEl.clientWidth;
            if (!clientWidth) return;
            if(clientWidth>=750){
                docEl.style.fontSize = '100px';
            }else{
                docEl.style.fontSize = 100 * (clientWidth / 750) + 'px';
            }
        };

    if (!doc.addEventListener) return;
    win.addEventListener(resizeEvt, recalc, false);
    doc.addEventListener('DOMContentLoaded', recalc, false);
})(document, window);
</script>
<!--<script>
$('.my_view').css("display","none");
$('.load-overlay').css("display","block");
//截取URL 获取
function GetQueryString(name){
     var reg = new RegExp("(^|&)"+ name +"=([^&]*)(&|$)");
     var r = window.location.search.substr(1).match(reg);
     if(r!=null)return  unescape(r[2]); return null;
};
var myreportId=GetQueryString("reportId");
var myopenId=GetQueryString("openId");
var sameUser=GetQueryString("sameUser");
var edition=GetQueryString("edition");
if(edition==null){
	edition = '';
};
var shipu=GetQueryString("shipu");
if(shipu==null){
	shipu = '';
};
var targetthirdid=GetQueryString("targetId");
if(targetthirdid==null){
	targetthirdid = '';
};

$.ajax({
url : dataUrl + "/api/v1/reportWxPay/findPackage",
type : "post",
dataType : 'json',
data : {
    reportId : myreportId,
    openId : myopenId
},
success : function(indexData) {
	if(indexData.code==200){
		window.location.href="index.html?reportId="+myreportId+"&openId=" + myopenId;
	}else if(indexData.code==201){
		$('.my_view').css("display","block");
		$('.load-overlay').css("display","none");
 		var myApp = new Vue({
			el: '#appVUE',
			data: {
			  	name: indexData.data.infoView.name, //套餐名称
			  	price: indexData.data.infoView.price,  //价格
			  	oprice: indexData.data.infoView.originalPrice, //原价
			  	description: indexData.data.infoView.description  //描述	
			}
		});
		var userId = indexData.data.infoView.userId;
		var packageId = indexData.data.infoView.packageId;
		var name = indexData.data.infoView.name;
		var price = indexData.data.infoView.price;
		
		if(indexData.data.infoView == null){
			$('#pay').css("background","#CCCCCC");
		}else{
			//判断新用户
			var isFree = indexData.data.infoView.isFree;
			if(isFree == 1){
				$('#pay').html('查看');
				$('#pay').click(function(){
					if(targetthirdid){
						window.location.href="third.html?reportId="+myreportId+"&openId=" + myopenId+"&userId="+userId+"&targetId="+targetthirdid;	
					}else if(shipu){
						window.location.href="../recipes.html?reportId="+myreportId+"&openId=" + myopenId;
					}else{
						window.location.href="z_pop.html?reportId="+myreportId+"&openId=" + myopenId;
					}
					
				});
			};
			
			//sameUser (是否是本人的报告), 1/2 是否显示卡支付 代付提醒
			if(sameUser == 2){
				$('#kaPay').css("display","none");
				$('.v_overlay').css({"visibility":"visible","opacity":"1"});
				$('.daifu_d').css("display","block");
			};
			
			if(price == 0){
				$('#pay').on("click",function(){
					$.ajax({
						url : dataUrl + "/api/v1/reportWxPay/insertFreeOrder",
						type : "post",
						dataType : 'json',
						data : {
						    reportId : myreportId,
						    packageId: packageId,
						    userId: userId
						},
						success : function(data){
							if(data.code==200){
								if(targetthirdid){
									window.location.href="third.html?reportId="+myreportId+"&openId=" + myopenId+"&userId="+userId+"&targetId="+targetthirdid;	
								}else if(shipu){
									window.location.href="../recipes.html?reportId="+myreportId+"&openId=" + myopenId;
								}else{
									window.location.href="z_pop.html?reportId="+myreportId+"&openId=" + myopenId;
								}
	
							}else{
								alert('支付失败insertFreeOrder-code='+data.code);
							}
							
						}
					})
				});
			}else{
				$('#pay').on("click",function(){
					//选择支付方式
					$('.v_overlay').css({"visibility":"visible","opacity":"1"});
					$('.sl-pay').css({"transform":"translateY(0%)"});
				});
			};
	
			//关闭 选择方式
			$('.close').click(function(){
				$('.v_overlay').css({"visibility":"hidden","opacity":"0"});
				$('.sl-pay').css({"transform":"translateY(110%)"});
			});
			//关闭 代付提醒
			$('#iknow').click(function(){
				$('.v_overlay').css({"visibility":"hidden","opacity":"0"});
				$('.daifu_d').css("display","none");
			});
			//支付跳转 +
			$('#wxpay').attr("href","wxPay.html?reportId=" +myreportId+ "&userId=" +userId+ "&packageId=" +packageId+"&name=" +name+ "&price=" +price + '&openId=' + myopenId + "&edition="+edition+"&targetId="+targetthirdid +"&shipu="+shipu);
				
		}
		
	}else{
		alert(indexData.msg);
	}
	
},
    error : function(obj,msg){
    	console.log(obj  + msg);
    }
});
	
</script>-->

</body>
</html>
